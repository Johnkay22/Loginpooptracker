<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poop Profit Calculator</title>

    <!-- Meta Tags -->
    <meta name="description" content="Have you ever wondered how much you make to poop at work?" />
    <meta name="keywords" content="poop tracker, earnings tracker, poop earnings, fun poop tracking, poop profit, profit calculator, work app, paid to poop, on the clock, poop at work, free money, work poop, poop on the job, poop earnings"/>

    <!-- Social Media Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Poop Profit Calculator!" />
    <meta name="twitter:description" content="Have you ever wondered how much you make to poop at work?" />
    <meta name="twitter:image" content="https://raw.githubusercontent.com/Johnkay22/Loginpooptracker/main/PPCImage.jpg" />
    <meta name="twitter:site" content="@YourTwitterHandle" />

    <meta property="og:title" content="Poop Profit Calculator!" />
    <meta property="og:description" content="Have you ever wondered how much you make to poop at work?" />
    <meta property="og:url" content="https://www.poopprofit.com" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Poop Profit Calculator" />
    <meta property="og:image" content="https://raw.githubusercontent.com/Johnkay22/Loginpooptracker/main/PPCImage.jpg">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>

    <!-- Initialize Firebase -->
    <script>
      const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "poopprofitproject.firebaseapp.com",
        projectId: "poopprofitproject",
        storageBucket: "poopprofitproject.appspot.com",
        messagingSenderId: "818996284466",
        appId: "1:818996284466:web:de6d6bab3987cca417c02b",
        measurementId: "G-JBXJ1T6LYM"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();
      const auth = firebase.auth();
    </script>

    <!-- Your Custom Styles (Including Game Modal) -->
    <style>
        body {
            background-color: #111;
            color: white;
            font-family: 'Arial', sans-serif;
            text-align: center;
        }

        .neon-text {
            font-size: 48px;
            color: #0F0;
            text-shadow: 0 0 10px #0F0, 0 0 20px #0F0, 0 0 30px #0F0;
        }

        .card {
            background-color: #222;
            padding: 20px;
            margin: 20px;
            border-radius: 8px;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }

        input[type="number"] {
            padding: 10px;
            border-radius: 5px;
            margin: 10px;
            font-size: 1rem;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            background-color: #0F0;
            color: black;
            cursor: pointer;
            font-size: 1rem;
            margin: 10px;
        }

        button:hover {
            background-color: #0A0;
        }

        #timer {
            font-size: 36px;
            margin-bottom: 20px;
        }

        #poopEmoji {
            font-size: 50px;
        }

        #logEntries {
            margin-top: 20px;
        }

        .log-entry {
            background-color: #333;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .delete-btn {
            background-color: red;
            color: white;
            border: none;
            border-radius: 5px;
            float: right;
        }

        /* Modal and game styling */
        #factGameModal, #ratingModal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.9);
            text-align: center;
            color: white;
        }

        #factGameModal .modal-content, #ratingModal .modal-content {
            margin: 15% auto;
            padding: 20px;
            background-color: #222;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.3);
        }

        .close {
            color: red;
            float: right;
            font-size: 24px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h1 class="neon-text">Poop Profit Calculator</h1>

    <!-- Main Poop Calculator Structure -->
    <div class="card">
        <input type="number" id="salary" placeholder="Annual Salary">
        <input type="number" id="hoursPerWeek" placeholder="Weekly Work Hours">
        <div id="result"></div>
    </div>

    <div class="card">
        <div id="poopEmoji">üí©</div>
        <div id="timer">00:00:00</div>
        <button id="startStopButton">Start Pooping</button>
    </div>

    <div class="card">
        <h2>Poop Log</h2>
        <div id="logEntries"></div>
    </div>

    <button id="statsButton">Show Stats</button>
    <button id="boredButton">I'm Bored!</button>
    <button id="logoutButton">Logout</button>

    <!-- Fact Game Modal -->
    <div id="factGameModal">
        <div class="modal-content">
            <span class="close" id="closeFactGameModal">&times;</span>
            <h2>Fun Fact!</h2>
            <div id="factStatement">This is a true fact!</div>
            <button id="trueButton">True</button>
            <button id="falseButton">False</button>
            <div id="scoreCard">Correct: <span id="correctScore">0</span> | Incorrect: <span id="incorrectScore">0</span></div>
        </div>
    </div>

    <!-- Rating Modal -->
    <div id="ratingModal">
        <div class="modal-content">
            <span class="close" id="closeRatingModal">&times;</span>
            <h2>Rate Your Poop!</h2>
            <div id="poopRating">‚≠ê‚≠ê‚≠ê</div>
            <button id="submitRating">Submit Rating</button>
        </div>
    </div>

    <!-- Script for Game Logic and Main Poop Tracker -->
    <script>
        // Declare necessary elements for fact game
        const salaryInput = document.getElementById('salary');
        const hoursPerWeekInput = document.getElementById('hoursPerWeek');
        const timerDiv = document.getElementById('timer');
        const startStopButton = document.getElementById('startStopButton');
        const logEntriesDiv = document.getElementById('logEntries');
        const boredButton = document.getElementById('boredButton');
        const factGameModal = document.getElementById('factGameModal');
        const closeFactGameModal = document.getElementById('closeFactGameModal');
        const trueButton = document.getElementById('trueButton');
        const falseButton = document.getElementById('falseButton');
        const correctScore = document.getElementById('correctScore');
        const incorrectScore = document.getElementById('incorrectScore');

        let isRunning = false;
        let startTime;
        let timerInterval;
        let factGameScore = { correct: 0, incorrect: 0 };

        boredButton.addEventListener('click', () => {
            factGameModal.style.display = "block";
        });

        closeFactGameModal.addEventListener('click', () => {
            factGameModal.style.display = "none";
        });

        trueButton.addEventListener('click', () => {
            handleFactGame(true);
        });

        falseButton.addEventListener('click', () => {
            handleFactGame(false);
        });

        function handleFactGame(userChoice) {
            // Example game logic: let‚Äôs assume the fact is always true for now.
            const factIsTrue = true; // This would dynamically change based on your fact game logic.

            if (userChoice === factIsTrue) {
                factGameScore.correct += 1;
                correctScore.innerText = factGameScore.correct;
            } else {
                factGameScore.incorrect += 1;
                incorrectScore.innerText = factGameScore.incorrect;
            }

            // Close the modal after answering
            factGameModal.style.display = "none";
        }

        function startStopTimer() {
            if (!isRunning) {
                isRunning = true;
                startStopButton.innerText = "Stop Pooping";
                startTime = Date.now() - (sessionStorage.getItem('timer') || 0);

                timerInterval = setInterval(() => {
                    const elapsed = Date.now() - startTime;
                    sessionStorage.setItem('timer', elapsed);
                    timerDiv.innerText = formatTime(Math.floor(elapsed / 1000));
                }, 1000);
            } else {
                isRunning = false;
                clearInterval(timerInterval);
                startStopButton.innerText = "Start Pooping";

                const elapsedSeconds = Math.floor((Date.now() - startTime) / 1000);
                const salary = salaryInput.value;
                const hoursPerWeek = hoursPerWeekInput.value;
                const earnings = calculateEarnings(elapsedSeconds, salary, hoursPerWeek);

                logPoopSession(elapsedSeconds, earnings);

                sessionStorage.removeItem('timer');
                timerDiv.innerText = "00:00:00";
            }
        }

        function calculateEarnings(seconds, salary, hoursPerWeek) {
            const salaryPerSecond = salary / (hoursPerWeek * 3600 * 52);
            return seconds * salaryPerSecond;
        }

        function formatTime(totalSeconds) {
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function updateLog() {
            logEntriesDiv.innerHTML = ''; 

            currentUser.data.poopSessions.forEach((session, index) => {
                const logEntry = document.createElement('div');
                logEntry.className = 'log-entry';
                logEntry.innerHTML = `
                    <button class="delete-btn" data-index="${index}">√ó</button>
                    <div class="date">${new Date(session.date).toLocaleString()}</div>
                    <div class="details">Duration: ${formatTime(session.duration)}<br>Earnings: $${session.earnings.toFixed(2)}</div>
                `;
                logEntriesDiv.appendChild(logEntry);
            });

            const deleteButtons = document.querySelectorAll('.delete-btn');
            deleteButtons.forEach(button => {
                button.addEventListener('click', (event) => {
                    const index = event.target.getAttribute('data-index');
                    currentUser.data.poopSessions.splice(index, 1);
                    saveUserData();
                    updateLog();
                });
            });
        }

        function logPoopSession(duration, earnings) {
            const now = new Date();
            const session = {
                date: now,
                duration: duration,
                earnings: earnings,
                rating: 0,
                comment: ''
            };

            currentUser.data.poopSessions.push(session);
            currentUser.data.totalEarnings += earnings;

            if (auth.currentUser) {
                db.collection('users').doc(auth.currentUser.uid).set(currentUser)
                .then(() => {
                    console.log("User data saved to Firestore.");
                })
                .catch((error) => {
                    console.error("Error saving data to Firestore:", error);
                });
            }

            updateLog();
        }

        function saveUserData() {
            if (auth.currentUser) {
                db.collection('users').doc(auth.currentUser.uid).set(currentUser)
                .then(() => {
                    console.log("User data saved to Firestore.");
                })
                .catch((error) => {
                    console.error("Error saving data to Firestore:", error);
                });
            }
        }

        logoutButton.addEventListener('click', () => {
            auth.signOut().then(() => {
                console.log("User logged out.");
                location.reload();
            }).catch((error) => {
                console.error("Error logging out: ", error);
            });
        });

        updateLog();
    </script>
</body>
</html>
