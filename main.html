
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poop Profit Calculator</title>

    <!-- Meta Tags -->
    <meta name="description" content="Have you ever wondered how much you make to poop at work?" />
    <meta name="keywords" content="poop tracker, earnings tracker, poop earnings, fun poop tracking, poop profit, profit calculator, work app, paid to poop, on the clock, poop at work, free money, work poop, poop on the job, poop earnings"/>

    <!-- Social Media Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Poop Profit Calculator!" />
    <meta name="twitter:description" content="Have you ever wondered how much you make to poop at work?" />
    <meta name="twitter:image" content="https://raw.githubusercontent.com/Johnkay22/Loginpooptracker/main/PPCImage.jpg" />
    <meta name="twitter:site" content="@YourTwitterHandle" />

    <meta property="og:title" content="Poop Profit Calculator!" />
    <meta property="og:description" content="Have you ever wondered how much you make to poop at work?" />
    <meta property="og:url" content="https://www.poopprofit.com" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Poop Profit Calculator" />
    <meta property="og:image" content="https://raw.githubusercontent.com/Johnkay22/Loginpooptracker/main/PPCImage.jpg">

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>

    <!-- Initialize Firebase -->
    <script>
      const firebaseConfig = {
        apiKey: "YOUR_API_KEY",
        authDomain: "poopprofitproject.firebaseapp.com",
        projectId: "poopprofitproject",
        storageBucket: "poopprofitproject.appspot.com",
        messagingSenderId: "818996284466",
        appId: "1:818996284466:web:de6d6bab3987cca417c02b",
        measurementId: "G-JBXJ1T6LYM"
      };

      // Initialize Firebase
      firebase.initializeApp(firebaseConfig);
      const db = firebase.firestore();
      const auth = firebase.auth();
    </script>

    <!-- CSS Styles -->
    <style>
        body {
            background-color: black;
            color: white;
            font-family: 'Roboto', sans-serif;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        h1, h2 {
            color: #00e676;
        }

        .neon-text {
            font-size: 48px;
            color: #00e676;
            text-shadow: 0 0 10px #00e676, 0 0 20px #00e676, 0 0 30px #00e676;
        }

        .card {
            background-color: #333;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
            box-shadow: 0 0 10px #00e676;
        }

        input[type="number"] {
            width: 80%;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            border: none;
        }

        button {
            padding: 10px 20px;
            margin: 10px 0;
            border-radius: 5px;
            border: none;
            background-color: #00e676;
            color: black;
            cursor: pointer;
        }

        button:hover {
            background-color: #00ff90;
        }

        #poopEmoji {
            font-size: 48px;
            margin-bottom: 10px;
        }

        #timer {
            font-size: 48px;
            margin-bottom: 20px;
        }

        #log {
            text-align: left;
        }

        .log-entry {
            background-color: #444;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .log-entry .date {
            font-size: 12px;
            color: #ccc;
        }

        .log-entry .details {
            font-size: 16px;
        }

        .delete-btn {
            background-color: red;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            float: right;
        }
    </style>
</head>
<body>

    <!-- Main HTML Structure -->
    <div class="container">
        <h1 class="neon-text">Poop Profit Calculator</h1>
        <div class="card glow">
            <input type="number" id="salary" placeholder="Annual Salary">
            <input type="number" id="hoursPerWeek" placeholder="Weekly Work Hours">
            <div id="result"></div>
        </div>
        <div class="card glow">
            <div id="poopEmoji">ðŸ’©</div>
            <div id="timer" class="neon-text">00:00:00</div>
            <button id="startStopButton">Start Pooping</button>
            <button id="boredButton" style="display: none;">Bored?</button>
            <button id="stillBoredButton" style="display: none;">Still bored??</button>
        </div>
        <div class="card glow">
            <h2>Poop Log</h2>
            <div id="log">
                <div id="logEntries"></div>
            </div>
        </div>
        <button id="statsButton">Show Statistics</button>
        <button id="logoutButton">Logout</button>
    </div>

    <!-- Script Section -->
    <script>
      const salaryInput = document.getElementById('salary');
      const hoursPerWeekInput = document.getElementById('hoursPerWeek');
      const resultDiv = document.getElementById('result');
      const timerDiv = document.getElementById('timer');
      const startStopButton = document.getElementById('startStopButton');
      const logEntriesDiv = document.getElementById('logEntries');
      const statsButton = document.getElementById('statsButton');
      const poopEmoji = document.getElementById('poopEmoji');
      const logoutButton = document.getElementById('logoutButton');
      let boredButton = document.getElementById('boredButton');
      let stillBoredButton = document.getElementById('stillBoredButton');
      let factGameModal = document.getElementById('factGameModal');
      let factStatement = document.getElementById('factStatement');
      let trueButton = document.getElementById('trueButton');
      let falseButton = document.getElementById('falseButton');
      let startGameButton = document.getElementById('startGameButton');
      let scoreCard = document.getElementById('scoreCard');
      let correctScore = document.getElementById('correctScore');
      let incorrectScore = document.getElementById('incorrectScore');

      const ratingModal = document.getElementById('ratingModal');
      const poopButtons = ratingModal.querySelectorAll('.poop');
      const submitRatingButton = document.getElementById('submitRating');
      const closeButtons = document.querySelectorAll('.close');

      const statsModal = document.getElementById('statsModal');
      const shareModal = document.getElementById('shareModal');
      const shareRatingModal = document.getElementById('shareRatingModal');

      let currentUser = {};  // Initialize as an empty object

      auth.onAuthStateChanged(function(user) {
          if (user) {
              const userRef = db.collection('users').doc(user.uid);
              userRef.get().then((doc) => {
                  if (!doc.exists) {
                      currentUser = {
                          email: user.email,
                          data: {
                              poopSessions: [],
                              totalEarnings: 0
                          }
                      };
                      userRef.set(currentUser).then(() => {
                          console.log("User data initialized in Firestore.");
                          enableFeatures();
                      });
                  } else {
                      currentUser = doc.data(); 
                      enableFeatures();
                  }
              }).catch((error) => {
                  console.error("Error fetching user data: ", error);
              });
          } else {
              currentUser = {
                  email: 'guest@example.com',
                  data: {
                      poopSessions: [],
                      totalEarnings: 0
                  }
              };
              enableFeatures();
          }
      });

      function enableFeatures() {
          updateLog();
          startStopButton.addEventListener('click', startStopTimer);
      }

      function startStopTimer() {
          const timerElement = document.getElementById('timer');
          let isRunning = false;
          let startTime;
          let timerInterval;

          if (!isRunning) {
              isRunning = true;
              startStopButton.innerText = "Stop Pooping";
              startTime = Date.now() - (sessionStorage.getItem('timer') || 0);

              timerInterval = setInterval(() => {
                  const elapsed = Date.now() - startTime;
                  sessionStorage.setItem('timer', elapsed);
                  timerElement.innerText = formatTime(Math.floor(elapsed / 1000));
              }, 1000);
          } else {
              isRunning = false;
              clearInterval(timerInterval);
              startStopButton.innerText = "Start Pooping";

              const elapsedSeconds = Math.floor((Date.now() - startTime) / 1000);
              const salary = document.getElementById('salary').value;
              const hoursPerWeek = document.getElementById('hoursPerWeek').value;
              const earnings = calculateEarnings(elapsedSeconds, salary, hoursPerWeek);

              logPoopSession(elapsedSeconds, earnings);

              sessionStorage.removeItem('timer');
              timerElement.innerText = "00:00:00";
          }
      }

      function calculateEarnings(seconds, salary, hoursPerWeek) {
          const salaryPerSecond = salary / (hoursPerWeek * 3600 * 52);
          return seconds * salaryPerSecond;
      }

      function formatTime(totalSeconds) {
          const hours = Math.floor(totalSeconds / 3600);
          const minutes = Math.floor((totalSeconds % 3600) / 60);
          const seconds = totalSeconds % 60;
          return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      }

      function updateLog() {
          logEntriesDiv.innerHTML = ''; 

          currentUser.data.poopSessions.forEach((session, index) => {
              const logEntry = document.createElement('div');
              logEntry.className = 'log-entry';
              logEntry.innerHTML = `
                  <button class="delete-btn" data-index="${index}">Ã—</button>
                  <div class="date">${new Date(session.date).toLocaleString()}</div>
                  <div class="details">Duration: ${formatTime(session.duration)}<br>Earnings: $${session.earnings.toFixed(2)}</div>
              `;
              logEntriesDiv.appendChild(logEntry);
          });

          // Add event listeners to delete buttons
          const deleteButtons = document.querySelectorAll('.delete-btn');
          deleteButtons.forEach(button => {
              button.addEventListener('click', (event) => {
                  const index = event.target.getAttribute('data-index');
                  currentUser.data.poopSessions.splice(index, 1);  // Remove session from array
                  saveUserData();
                  updateLog();  // Update the log UI
              });
          });
      }

      function logPoopSession(duration, earnings) {
          const now = new Date();
          const session = {
              date: now,
              duration: duration,
              earnings: earnings,
              rating: 0,
              comment: ''
          };

          currentUser.data.poopSessions.push(session);
          currentUser.data.totalEarnings += earnings;

          if (auth.currentUser) {
              db.collection('users').doc(auth.currentUser.uid).set(currentUser)
              .then(() => {
                  console.log("User data saved to Firestore.");
              })
              .catch((error) => {
                  console.error("Error saving data to Firestore:", error);
              });
          }

          updateLog();
      }

      function saveUserData() {
          if (auth.currentUser) {
              db.collection('users').doc(auth.currentUser.uid).set(currentUser)
              .then(() => {
                  console.log("User data saved to Firestore.");
              })
              .catch((error) => {
                  console.error("Error saving data to Firestore:", error);
              });
          }
      }

      // Handle other elements related to the fact game and rating modals
      trueButton.addEventListener('click', handleTrueButtonClick);
      falseButton.addEventListener('click', handleFalseButtonClick);

      function handleTrueButtonClick() {
          // Handle the true button logic
      }

      function handleFalseButtonClick() {
          // Handle the false button logic
      }

      poopButtons.forEach(button => {
          button.addEventListener('click', () => {
              // Handle poop rating button clicks
          });
      });

      submitRatingButton.addEventListener('click', () => {
          // Submit the poop rating logic
      });

      closeButtons.forEach(button => {
          button.addEventListener('click', () => {
              // Close modal logic
          });
      });

      logoutButton.addEventListener('click', () => {
          auth.signOut().then(() => {
              console.log("User logged out.");
              location.reload();  // Refresh the page
          }).catch((error) => {
              console.error("Error logging out: ", error);
          });
      });

      updateLog();  // Initial log update when the page loads
    </script>
</body>
</html>
