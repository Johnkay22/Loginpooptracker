<html>
<head>
    <base href="https://www.poopprofit.com/index.html">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-R1E17DCKNC"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-R1E17DCKNC');
    </script>
    <title>How Much You Make to Poop!</title>
    <meta name="description" content="Have you ever wondered how much you make to poop at work?" />
    <meta name="keywords" content="poop tracker, earnings tracker, poop earnings, fun poop tracking, poop profit, profit calculator, work app, paid to poop, on the clock, poop at work, free money, work poop, poop on the job, poop earnings"/>
    <link rel="icon" href="https://www.poopprofit.com/favicon.png" type="image/png">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Poop Profit Calculator!" />
    <meta name="twitter:description" content="Have you ever wondered how much you make to poop at work?" />
    <meta name="twitter:image" content="https://raw.githubusercontent.com/Johnkay22/Loginpooptracker/main/PPCImage.jpg" />
    <meta name="twitter:site" content="@YourTwitterHandle" />

    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Poop Profit Calculator!" />
    <meta property="og:description" content="Have you ever wondered how much you make to poop at work?" />
    <meta property="og:url" content="https://www.poopprofit.com" />
    <meta property="og:type" content="website" />
    <meta property="og:site_name" content="Poop Profit Calculator" />
    <meta property="og:image" content="https://raw.githubusercontent.com/Johnkay22/Loginpooptracker/main/PPCImage.jpg" />

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Firebase setup -->
    <script src="https://www.gstatic.com/firebasejs/9.1.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.1.0/firebase-firestore.js"></script>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyAVZEGrBqPtDWH4acfOmzLk5k323A7EB6o",
  authDomain: "poopprofitproject.firebaseapp.com",
  projectId: "poopprofitproject",
  storageBucket: "poopprofitproject.appspot.com",
  messagingSenderId: "818996284466",
  appId: "1:818996284466:web:de6d6bab3987cca417c02b",
  measurementId: "G-JBXJ1T6LYM"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
    </script>

    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --background-color: #1a1a2e;
            --text-color: #e0e0e0;
            --card-background: #16213e;
            --accent-color: #f39c12;
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }

        h1, h2 {
            color: var(--primary-color);
            text-align: center;
            font-weight: 300;
            margin-bottom: 30px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .card {
            background-color: var(--card-background);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            padding: 30px;
            margin-bottom: 30px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        }

        input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: none;
            border-bottom: 2px solid var(--primary-color);
            background-color: transparent;
            color: var(--text-color);
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        input:focus {
            outline: none;
            border-bottom-color: var(--secondary-color);
        }

        button {
            width: 100%;
            padding: 15px;
            margin: 15px 0;
            border: none;
            border-radius: 50px;
            background-color: var(--primary-color);
            color: white;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        button:hover {
            background-color: var(--secondary-color);
            transform: scale(1.05);
        }

        #timer {
            font-size: 72px;
            text-align: center;
            margin: 30px 0;
            color: var(--primary-color);
            font-weight: 300;
            text-shadow: 0 0 10px rgba(52, 152, 219, 0.5);
        }

        #poopEmoji {
            font-size: 72px;
            text-align: center;
            margin: 30px 0;
        }

        .wiggle {
            animation: wiggle 0.5s infinite;
        }

        @keyframes wiggle {
            0% { transform: rotate(0deg); }
            25% { transform: rotate(5deg); }
            75% { transform: rotate(-5deg); }
            100% { transform: rotate(0deg); }
        }

        #log {
            max-height: 400px;
            overflow-y: auto;
        }

        .log-entry {
            background-color: rgba(255, 255, 255, 0.05);
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            margin-bottom: 15px;
            position: relative;
            transition: all 0.3s ease;
            border-radius: 5px;
        }

        .log-entry:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .log-entry .delete-btn, .log-entry .share-btn {
            position: absolute;
            top: 10px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            border: none;
            color: white;
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .log-entry .delete-btn {
            right: 10px;
            background-color: var(--accent-color);
        }

        .log-entry .share-btn {
            right: 50px;
            background-color: var(--secondary-color);
        }

        .log-entry .delete-btn:hover, .log-entry .share-btn:hover {
            transform: scale(1.1);
        }

        .log-entry .date {
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .log-entry .details {
            color: var(--text-color);
            font-size: 14px;
        }

        .log-entry .rating {
            margin-top: 10px;
            color: var(--secondary-color);
        }

        .log-entry .comment {
            margin-top: 10px;
            font-style: italic;
            color: var(--text-color);
        }
    </style>
</head>
<body>

    <div class="container">
        <h1 class="neon-text">Poop Profit Calculator</h1>
        <div class="card glow">
            <input type="number" id="salary" placeholder="Annual Salary" oninput="saveUserData()">
            <input type="number" id="hoursPerWeek" placeholder="Weekly Work Hours" oninput="saveUserData()">
            <div id="result"></div>
        </div>
        <div class="card glow">
            <div id="poopEmoji">ðŸ’©</div>
            <div id="timer" class="neon-text">00:00:00</div>
            <button id="startStopButton">Start Pooping</button>
            <button id="boredButton" style="display: none;">Bored?</button>
            <button id="stillBoredButton" style="display: none;">Still bored??</button>
        </div>
        <div class="card glow">
            <h2>Poop Log</h2>
            <div id="log">
                <div id="logEntries"></div>
            </div>
        </div>
        <button id="statsButton">Show Statistics</button>
        <button id="logoutButton">Logout</button>
    </div>

    <script>
        let timer;
        let seconds = 0;
        let isRunning = false;
        let poopRating = 0;
        let lastSessionEarnings = 0;
        let currentUser = null;

        auth.onAuthStateChanged(async (user) => {
            if (user) {
                currentUser = user;
                await loadUserDataFromFirebase(user.uid);
            } else {
                window.location.href = 'signup.html';
            }
        });

        async function saveUserData() {
            if (!currentUser) return;
            try {
                const userData = {
                    poopSessions: currentUser.data.poopSessions || [],
                    totalEarnings: currentUser.data.totalEarnings || 0,
                    salary: parseFloat(document.getElementById('salary').value) || 0,
                    hoursPerWeek: parseFloat(document.getElementById('hoursPerWeek').value) || 0
                };
                await db.collection('users').doc(currentUser.uid).set(userData, { merge: true });
            } catch (error) {
                console.error("Error saving data:", error);
            }
        }

        async function loadUserDataFromFirebase(userId) {
            try {
                const userDoc = await db.collection('users').doc(userId).get();
                if (userDoc.exists) {
                    const userData = userDoc.data();
                    currentUser.data = userData;
                    document.getElementById('salary').value = userData.salary || 0;
                    document.getElementById('hoursPerWeek').value = userData.hoursPerWeek || 0;
                    updateLog();
                } else {
                    currentUser.data = { poopSessions: [], totalEarnings: 0 };
                }
            } catch (error) {
                console.error("Error loading user data:", error);
            }
        }

        function startStopTimer() {
            if (isRunning) {
                clearInterval(timer);
                startStopButton.textContent = 'Start Pooping';
                poopEmoji.classList.remove('wiggle');
                const earnings = calculateEarnings(seconds);
                lastSessionEarnings = earnings;
                logPoopSession(seconds, earnings);
                resetTimer();
                boredButton.style.display = 'none';
            } else {
                resetTimer();
                timer = setInterval(updateTimer, 1000);
                startStopButton.textContent = 'Stop Pooping';
                poopEmoji.classList.add('wiggle');
                boredButton.style.display = 'block';
            }
            isRunning = !isRunning;
        }

        function resetTimer() {
            clearInterval(timer);
            seconds = 0;
            timerDiv.textContent = '00:00:00';
        }

        function calculateEarnings(seconds) {
            const salary = parseFloat(document.getElementById('salary').value);
            const hoursPerWeek = parseFloat(document.getElementById('hoursPerWeek').value);
            const hourlyRate = salary / (hoursPerWeek * 52);
            return (hourlyRate / 3600) * seconds;
        }

        function logPoopSession(duration, earnings) {
            const now = new Date();
            const session = { date: now, duration: duration, earnings: earnings, rating: 0, comment: '' };
            if (!currentUser.data.poopSessions) currentUser.data.poopSessions = [];
            currentUser.data.poopSessions.push(session);
            currentUser.data.totalEarnings += earnings;
            saveUserData();
        }

        function updateLog() {
            logEntriesDiv.innerHTML = '';
            currentUser.data.poopSessions.forEach((session, index) => {
                const logEntry = document.createElement('div');
                logEntry.className = 'log-entry';
                logEntry.innerHTML = `
                    <div class="date">${new Date(session.date).toLocaleString()}</div>
                    <div class="details">Duration: ${formatTime(session.duration)}<br>
                    Earnings: $${session.earnings.toFixed(2)}</div>
                `;
                logEntriesDiv.appendChild(logEntry);
            });
        }

        function updateTimer() {
            seconds++;
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            timerDiv.textContent = `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        function formatTime(totalSeconds) {
            const hours = Math.floor(totalSeconds / 3600);
            const minutes = Math.floor((totalSeconds % 3600) / 60);
            const seconds = totalSeconds % 60;
            return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        document.getElementById('startStopButton').addEventListener('click', startStopTimer);
    </script>

</body>
</html>
